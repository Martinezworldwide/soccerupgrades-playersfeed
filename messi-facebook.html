<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soccer Players – Facebook feed</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* Facebook feed page: grid of Page Plugin embeds, 20 per page */
        .fb-feed-page .intro {
            margin-bottom: var(--spacing-lg);
            color: var(--text-secondary);
            font-size: 1.05rem;
        }
        .fb-feed-page .fb-feed-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-xl);
        }
        @media (min-width: 600px) {
            .fb-feed-page .fb-feed-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (min-width: 1000px) {
            .fb-feed-page .fb-feed-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        .fb-feed-page .fb-feed-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            display: flex;
            flex-direction: column;
        }
        .fb-feed-page .fb-feed-card .fb-feed-card-title {
            padding: var(--spacing-sm) var(--spacing-md);
            font-weight: 600;
            font-size: 1rem;
            color: var(--text-primary);
            background: var(--surface);
            border-bottom: 1px solid var(--border-color);
        }
        .fb-feed-page .fb-feed-card .fb-feed-embed {
            flex: 1;
            min-height: 380px;
        }
        .fb-feed-page .fb-feed-card .fb-feed-embed iframe {
            width: 100%;
            height: 400px;
            border: none;
        }
        .fb-feed-page .pagination {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            padding: var(--spacing-lg) 0;
        }
        .fb-feed-page .pagination button {
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-color);
            background: var(--surface);
            border: 2px solid var(--primary-color);
            border-radius: var(--radius-md);
            cursor: pointer;
        }
        .fb-feed-page .pagination button:hover:not(:disabled) {
            background: var(--primary-color);
            color: white;
        }
        .fb-feed-page .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .fb-feed-page .pagination .page-info {
            font-size: 1rem;
            color: var(--text-secondary);
        }
    </style>
</head>
<body class="fb-feed-page">
    <header class="header">
        <div class="container">
            <a href="index.html" style="display:inline-block;margin-bottom:0.5rem;color:rgba(255,255,255,0.95);text-decoration:none;font-weight:500;">← All players</a>
            <h1 class="header-title">Soccer Players – Facebook feed</h1>
            <p class="header-subtitle">Official Facebook Pages embedded with Facebook's Page Plugin</p>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <p class="intro">Up to 20 Facebook Pages per page. Use Previous / Next to browse more players.</p>
            <div id="fbFeedGrid" class="fb-feed-grid"></div>
            <nav class="pagination" id="pagination" aria-label="Feed pagination">
                <button type="button" id="btnPrev" aria-label="Previous page">Previous</button>
                <span class="page-info" id="pageInfo">Page 1 of 1</span>
                <button type="button" id="btnNext" aria-label="Next page">Next</button>
            </nav>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p><a href="index.html" style="color:inherit;">Soccer Player Feed</a></p>
        </div>
    </footer>

    <script src="js/facebook-pages.js"></script>
    <script>
        (function() {
            var PER_PAGE = 20;
            var APP_ID = '878674618406542';
            var list = window.FACEBOOK_PAGES || [];
            var totalPages = Math.max(1, Math.ceil(list.length / PER_PAGE));
            var currentPage = 1;

            var grid = document.getElementById('fbFeedGrid');
            var pageInfo = document.getElementById('pageInfo');
            var btnPrev = document.getElementById('btnPrev');
            var btnNext = document.getElementById('btnNext');

            function buildPluginUrl(pageUsername) {
                var href = encodeURIComponent('https://www.facebook.com/' + pageUsername);
                return 'https://www.facebook.com/plugins/page.php?href=' + href +
                    '&tabs=timeline&width=280&height=400&small_header=true&adapt_container_width=true&hide_cover=false&show_facepile=false&appId=' + APP_ID;
            }

            function render() {
                var start = (currentPage - 1) * PER_PAGE;
                var slice = list.slice(start, start + PER_PAGE);
                grid.innerHTML = slice.map(function(item) {
                    var url = buildPluginUrl(item.pageUsername);
                    return '<div class="fb-feed-card">' +
                        '<div class="fb-feed-card-title">' + escapeHtml(item.fullName) + '</div>' +
                        '<div class="fb-feed-embed">' +
                        '<iframe src="' + escapeHtml(url) + '" width="280" height="400" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>' +
                        '</div></div>';
                }).join('');

                pageInfo.textContent = 'Page ' + currentPage + ' of ' + totalPages;
                btnPrev.disabled = currentPage <= 1;
                btnNext.disabled = currentPage >= totalPages;
            }

            function escapeHtml(s) {
                var div = document.createElement('div');
                div.textContent = s;
                return div.innerHTML;
            }

            btnPrev.addEventListener('click', function() {
                if (currentPage > 1) {
                    currentPage--;
                    render();
                }
            });
            btnNext.addEventListener('click', function() {
                if (currentPage < totalPages) {
                    currentPage++;
                    render();
                }
            });

            render();
        })();
    </script>
</body>
</html>
